<div th:fragment="list">
  <div class="row g-6">
    <div class="col-md-4 col-lg-3 mb-4" th:each="medicine : ${medList}">
      <div class="card h-100 shadow-sm">
        <img th:src="@{${medicine.imageUrl}}" class="card-img-top img-fluid" th:alt="${medicine.name}">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title" th:text="${medicine.name}"></h5>
          <p class="card-text text-muted small" th:text="${medicine.description}"></p>
          <p class="fw-bold text-primary fs-5">
            Rs. <span th:text="${medicine.price}"></span>
          </p>

          <div class="mt-auto d-flex justify-content-between align-items-center">
            <!-- If stock > 0 -->
            <div th:if="${medicine.quantityInStock > 0}">
              <form th:action="@{/addToCart}" method="post" class="d-inline">
                <input type="hidden" name="id" th:value="${medicine.id}">
                <button type="submit" class="btn btn-primary btn-sm">Add to Cart</button>
              </form>
            </div>

            <!-- If stock <= 0 -->
            <div th:unless="${medicine.quantityInStock > 0}">
              <button class="btn btn-secondary btn-sm" disabled>Out of Stock</button>
            </div>

            <!-- View details button always visible -->
            <form th:action="@{/medicine/details}" method="get" class="d-inline">
              <input type="hidden" name="id" th:value="${medicine.id}">
              <button type="submit" class="btn btn-sm btn-outline-primary">View Details</button>
            </form>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
