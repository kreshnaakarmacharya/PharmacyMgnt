<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Sell Medicine - Offline</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<th:block th:insert="AdminHeader.html"></th:block>
<div class="container mt-4">
    <h2>Sell Medicine</h2>
    <hr>
    <div class="card mb-4 p-3">
        <h5>Customer Information</h5>
        <div class="row g-3">
            <div class="col-md-4">
                <input type="text" class="form-control" placeholder="Customer Name" id="customerName">
            </div>
            <div class="col-md-4">
                <input type="text" class="form-control" placeholder="Contact Number" id="customerContact">
            </div>
            <div class="col-md-4">
                <input type="text" class="form-control" placeholder="Address" id="customerAddress">
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-4">
                <input type="datetime-local" class="form-control" id="saleDateTime"
                name="saleDateTime" th:value="${currentDateTime}">
            </div>
        </div>
    </div>
    <div class="card mb-4 p-3">
        <h5>Add Medicine</h5>
        <div class="row g-3">
            <div class="col-md-4">
                <select class="form-select" id="medicineSelect">
                    <option value="">--Select Medicine--</option>
                    <option th:each="med:${medicines}"
                            th:value="${med.id}"
                            th:data-price="${med.price}"
                            th:text="${med.name}+'-'+${med.price}"></option>
                </select>
            </div>
            <div class="col-md-2">
                <input type="number" class="form-control" placeholder="Quantity" id="medicineQty">
            </div>
            <div class="col-md-2">
                <button class="btn btn-primary" onclick="addMedicine()">Add to List</button>
            </div>
        </div>
    </div>

    <!-- Medicine List -->
    <div class="card mb-4 p-3">
        <h5>Purchase List</h5>
        <table class="table table-bordered" id="purchaseTable">
            <thead>
            <tr>
                <th>Medicine Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total Price</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <!-- Items will be added here dynamically -->
            </tbody>
        </table>
    </div>

    <!-- Billing -->
    <div class="card mb-4 p-3">
        <h5>Billing</h5>
        <div class="row g-3">
            <div class="col-md-2">
                <input type="number" class="form-control" placeholder="Discount" id="discount" value="0" oninput="calculateTotal()">
            </div>
            <div class="col-md-2">
                <input type="number" class="form-control" placeholder="Tender Amount" id="tender" oninput="calculateReturn()">
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" placeholder="Subtotal" id="subtotal" readonly>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" placeholder="Net Total" id="netTotal" readonly>
            </div>
            <div class="col-md-2">
                <input type="text" class="form-control" placeholder="Return Amount" id="returnAmt" readonly>
            </div>
            <div class="col-md-2">
                <button class="btn btn-success w-100" onclick="sellMedicine()">Sell Medicine</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
